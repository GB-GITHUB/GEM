<?xml version="1.0"?>
<task>

	<name>dim_date</name>
	<!-- Blocker behaviour: default is true -->
	<blocker>true</blocker>

	<preProcessing>
		<sourceQuery></sourceQuery>
		<targetQuery>
			<![CDATA[
				drop table if exists dim_date;
				create table dim_date(
				  date_id int not null primary key
				, year int
				, quarter int
				, month_number int
				, month_name_full varchar(10)
				, month_name_short varchar(3)
				, day_of_month int
				, day_of_year int
				, iso_year_of_week int
				, iso_week_of_year int
				, day_of_week int
				, day_of_week_full varchar(10)
				, day_of_week_short varchar(3)
				, date_string varchar(10)
				, date_value date
				) engine=myisam;
				create index idx_dim_date_yqm on dim_date( date_id, year, quarter, month_number, month_name_full );
				create index idx_dim_date_yqmd on dim_date( date_id, year, quarter, month_number, month_name_full, day_of_month, date_string );
				create index idx_dim_date_yw on dim_date( date_id, iso_year_of_week );
				create index idx_dim_date_ywd on dim_date( date_id, iso_year_of_week, day_of_week, day_of_week_full, date_string );
				create index idx_dim_date_lookup on dim_date( date_id, date_string );
			]]>
		</targetQuery>
		<transformation></transformation>
	</preProcessing>

	<source>
		<type>DB</type>
		<query>
			<![CDATA[
				select 
				  '1999-12-31' as start_date
				, 20000 as number_of_rows
			]]>
		</query>
	</source>

	<transform>
		<transformation>dim_date.ktr</transformation>
	</transform>

	<target>
		<loader>MySQL</loader>
		<table>
			<name>dim_date</name>
		</table>
	</target>

	<postProcessing>
		<sourceQuery></sourceQuery>
		<targetQuery></targetQuery>
		<transformation></transformation>
	</postProcessing>

</task>
