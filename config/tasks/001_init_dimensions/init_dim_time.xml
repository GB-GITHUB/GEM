<?xml version="1.0"?>
<task>

	<name>dim_time</name>

	<preProcessing>
		<targetQuery>
			<![CDATA[
				drop table if exists dim_time;
				create table dim_time(
				  time_id int not null primary key
				, hours24 int
				, hours24_lpad varchar(2)
				, hours12 int
				, hours12_lpad varchar(2)
				, am_pm_indicator varchar(2)
				, minutes int
				, minutes_lpad varchar(2)
				, seconds int
				, seconds_lpad varchar(2)
				, time_formatted12_hm varchar(7)
				, time_formatted24_hm varchar(5)
				, time_formatted12_hms varchar(11)
				, time_formatted24_hms varchar(9)
				) engine=myisam;
				create index idx_dim_time_hm12 on dim_time( time_id, hours12, minutes, time_formatted12_hm, am_pm_indicator );
				create index idx_dim_time_hm12lpad on dim_time( time_id, hours12_lpad, minutes_lpad, time_formatted12_hm, am_pm_indicator );
				create index idx_dim_time_hms12 on dim_time( time_id, hours12, minutes, seconds, time_formatted12_hms, am_pm_indicator );
				create index idx_dim_time_hms12lpad on dim_time( time_id, hours12_lpad, minutes_lpad, time_formatted12_hms, am_pm_indicator );
				create index idx_dim_time_hm24 on dim_time( time_id, hours24, minutes, time_formatted24_hm );
				create index idx_dim_time_hm24lpad on dim_time( time_id, hours24_lpad, minutes_lpad, time_formatted24_hm );
				create index idx_dim_time_hms24 on dim_time( time_id, hours24, minutes, seconds, time_formatted24_hms );
				create index idx_dim_time_hms24lpad on dim_time( time_id, hours24_lpad, minutes_lpad, time_formatted24_hms );
				create index idx_dim_time_lookup on dim_time( time_id, time_formatted24_hms );
			]]>
		</targetQuery>
	</preProcessing>

	<source>
		<type>DB</type>
		<query>
			select 
			  86400 as number_of_rows
		</query>
	</source>

	<transform>
		<transformation>dim_time.ktr</transformation>
	</transform>

	<target>
		<loader>MySQL</loader>
		<table>
			<name>dim_time</name>
		</table>
	</target>

</task>
